import Head from 'next/head';
import Image from 'next/image';
import Link from 'next/link';
import styles from '@/styles/login n signin/Profile-setup.module.css'
import { useState } from 'react';
import { useFormik } from 'formik';
import { useRouter } from 'next/router';

export default function Merchant() {

    
    const router = useRouter();

    const [namakendaraan, setKendaraan] = useState("");
    const [nomorpolisi, setNP] = useState("");
    const [warna, setWarna] = useState("");
  
    const handler = async (e) => {
      e.preventDefault();
  
      let nk = namakendaraan;
      let np = nomorpolisi;
      let w = warna;
  
      console.log(namakendaraan, nomorpolisi, warna)
  
      const options = {
          method:"POST",
          headers:{'Content-Type':'application/json'},
          body:JSON.stringify({namakendaraan:nk, nomorpolisi:np, warna:w})
      }
    
      await fetch('http://localhost:3000/api/auth/data-kendaraan', options)
          .then(res=>res.json())
          .then((datas)=>{
            console.log(datas);
            if(datas.status)router.push('http://localhost:3000/homepage');
            else alert(datas.message);
          })
    
    }

    return (
        <>
        <Head>
            <title>GetPartner</title>
            <meta name="description" content="Generated by create next app" />
            <meta name="viewport" content="width=device-width, initial-scale=1" />
            <link rel="icon" href="/favicon.ico" />
        </Head>

        <main className={styles.main}>
        <div class=" box position-relative">
            <div class="position-absolute top-50 start-50 translate-middle">
                <div className={styles.logo}>
                    <Image 
                    src="/aset/login n signin aset/Getjob.svg" 
                    alt="logo"
                    width={150}
                    height={50}
                    />
                </div>

                <div className={styles.title}>
                    <p>
                        Anda Mendaftar Sebagai
                        <br/>
                        <span className={styles.highlight}>Driver</span>
                        <br/>
                        <br/>
                        Isi Data Kendaraan Anda
                    </p>
                </div>

                <div className={styles.setup_main}>
                    <div className="merchant_field">
                        <input 
                        type="text" 
                        className={styles.setup_input} 
                        placeholder="Nama Kendaraan"
                        onChange={(e) => setKendaraan(e.target.value)}
                        />
                    </div>

                    <div className="merchant_field">
                        <input 
                        type="text" 
                        className={styles.setup_input} 
                        placeholder="Nomor Polisi Kendaraan"
                        onChange={(e) => setNP(e.target.value)}
                        />
                    </div>

                    <div className="merchant_field">
                        <input 
                        type="text" 
                        className={styles.setup_input} 
                        placeholder="Warna Kendaraan"
                        onChange={(e) => setWarna(e.target.value)}
                        />
                    </div>
            
                    <div class="input-group mb-3" className={styles.non_text_group}>
                        <label className={styles.non_text_group_text}>Foto Kendaraan</label>
                        <input type="file" accept="image/*" className={styles.setup_upload}/>
                    </div>

                    <div class="form-check" className={styles.setup_check}>
                        <input class="form-check-input" type="checkbox" value=""/>
                        <label className={styles.check_label}>
                            Saya telah membaca dan menyetujui <span className={styles.snk}>Syarat & Ketentuan</span> dan siap menjadi Partner Resmi dari GetJob.
                        </label>
                    </div>
            
                    <div className="buttons">
                        <Link href="#"><button className={styles.setup_next_btn} onClick={(e) => handler(e)}>Selesai</button></Link>
                    </div>
                </div>
            </div>
        </div>
        </main>
        </>
    )
}